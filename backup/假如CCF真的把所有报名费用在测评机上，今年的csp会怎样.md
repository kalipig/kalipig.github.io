相信参加过 ccf 举办的比赛的大家都一直有一个问题，就是为什么一些看起来毫无意义的问题要要求你必须在一秒内解决，即使在实际的工程中可能不会有这么死的限制。而且你还交了几百块钱去比赛。
只有一个原因就是**测评机跑太慢了**！

那么如果 ccf 把所有报名费都花在测评机上，买市面上能买到的最好的测评机来跑，钱够不够，会怎样，今年的 CSP-S 会有多简单？

## 测评机选择
今年用的是：Intel Core Ultra 9 285K CPU @ 3.70 GHz（关闭睿频与能效核），内存为96 GB。\
理论极限为多核性能（理想情况）：如果程序能完美并行，8个核心的总性能  $=5.55 \times 10^9 \times 8 \approx 4.44 \times 10^{10}$。
实际能跑个 $5\times 10^8$ 不错了。

但是想要完成每一个 OI 选手的梦想 $10^6$ 跑 $n^2$
还差的非常远。

### 该选择哪款芯片呢？
首先是需要能买到，中国的芯片产业尚在发展，还是需要去美国购买。那么根据最新的中国香港海关信息，CPU 关税代码和计算如下：
![](https://youke1.picui.cn/s1/2025/11/11/6912ebb5de415.png)
ccf 今年用的芯片在香港买单价约为 $4125\text{HKD}$，当然大陆的关税会高一些。所以最后的单价在 $6000\text{CHR}$ 左右。

虽然 Intel 系列是市场主流，但是不得不承认的是，苹果公司的 M 系列芯片除了系统不适配以外确实有更多优点，在[性能排名](https://www.topcpu.net/cpu-r/geekbench-6-single-core)上也更有优势，前十占了八个，虽然最强的 M5 和 M4 Ultra 现在还没有正式放到机器上售卖。

我们能买到的就是苹果公司最新推出的 M3 Ultra。
那么根据 [Apple官网的数据](https://www.apple.com.cn/newsroom/2025/03/apple-reveals-m3-ultra-taking-apple-silicon-to-a-new-extreme/)（下为原文）：

---

> M3 Ultra 具备 Mac 芯片迄今最强性能，同时保持了 Apple 芯片领先业界的能效表现。M3 Ultra 配备最多 32 核中央处理器，包括 24 颗性能核心和 8 颗能效核心。
> M3 Ultra 为 Mac Studio 带来对雷雳 5 端口的支持，数据传输速度最高可达 120 Gb/s，Mac Studio 的雷雳 5 端口为专业用户带来更快的数据传输速度。雷雳 5 还可连接多台 Mac Studio 系统，以实现挑战内容创作与计算机科学探索极限的工作流。


---


**内存最高达到了 512GB，32 核 (24 性能核+8 能效核)搭配上内存带宽最高可达 2.5TB/s**，在性能方面很明显优于酷睿，而高带宽利于数据频繁读写，故在常数特别是内存读取方面有巨大优势。

根据 Deepseek 推算，每秒计算理论值可以达到 $5\times10^{10}$，实际可以达到 $1\times 10^{10}$。

当然 M3 Ultra 显然不能单独买，所以现在能买到的就是搭载 M3 Ultra 的 Mac Studio，官网售价 $16999\text{CNR}$。

但是这样还是跑不到 $10^{12}$。

既然一台机器跑不到，还有一个东西叫**多线程分布式计算**。\
也就是大家平时听说的大公司的算力，当然他们比 ccf 有钱多了。

粗略估计我们至少还需要 $100$ 台 Mac Studio 来跑，但是算力可不是简单的相加！

如何将 $n^2$ 个任务公平、高效地分配给 $100$ 个 CPU ? 需要设计复杂的分布式任务调度系统（如模仿 MapReduce）。调度开销可能占整个计算时间的很大一部分。算法通常需要访问整个或大部分数据集。例如，一个处理 $10^6$ 大小数组的双重循环。	需要将整个数组（至少是 4MB 的 int 数组）分发给所有 $100$ 台机器。

但是别忘了 Mac Studio 就是为了多线程来跑的。
算上交换损失可能需要 $500$ 台。

### 怎么给 ccf 搭建测评机？
首先要买 $500$ 台 Mac Studio，大约要 $7,480,000\text{CNR}$，布置机房，散热和电力等需要 $1,200,000\text{CNR}$，高速交换机和光纤可以将机器之间的交换做到最小，需要 $700,000\text{CNR}$，硬件总共需要 $8,300,000\text{CNR}$。

然后可以找美国的专业公司定制一套合适的测评系统，平均价格在 $700,000\text{CNR}$，再开发一套基于 ARM 架构下的 NOI Linux 则需要约 $105,000\text{CNR}$，所以软件方面总计 $805,000\text{CNR}$。

总花费为 $9,105,000\text{CNR}$。
### ccf 一年收多少报名费？
总参加人数约为 $150,000$ 人，按报名费 $100+560=660\text{CNR}$ 就是 $105,000,000$，这一套测评机初期至少可以用 $5$ 年，一年只用十几次，首次投入按 $9,000,000\text{CNR}$ 计算，则 `ccf` 只需要拿出 $12\%$ 的五年的报名费。

只需要 $12\%$ 报名费就可以了！

但是我们对于它实际上把钱花哪里去了不太清楚，~~可能~~一定是提高比赛质量，推动信息学发展，或者教师培训和考点布置。

### 如果真的能跑 $10^{12}$
那来看看今年的 CSP-S 会怎么样。
#### 第一题
直接枚举第一个部门多少人，第二个部门多少人，然后第三个部门就是剩下的，所以 $\mathcal{O}(n^2\log n)$ 也就是 $10^{11}$ 随便跑！！！
#### 第二题
直接 $2^k$ 枚举选择然后建边跑最小生成树，$2.25\times 10^{10}$ 随便跑！
#### 第三题
只需要最简单的字符串哈希处理一下，然后每次询问直接跑，刚好 $10^{12}$ 也能跑！
#### 第四题
直接暴力动态规划，设 $dp_{i,j}$ 表示前 $i$ 天已经有 $j$ 个人放弃最后还能剩下的最大人数，状态是 $n^2$，每次转移需要考虑后面的人，总复杂度 $\mathcal{O}(n^2m)$，但是 $n$ 才 $500$ 所以总共 $1.25\times 10^8$ 随便跑！！！

~~我来我也能 AK 了。~~

本文基于实际情况合理推测，请勿尝试。